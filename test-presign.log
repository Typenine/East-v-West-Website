[test] presign POST http://localhost:3003/api/media/presign
[test] presign ok {"key":"uploads/test.txt","putUrl":"https://fdfd423971a9c0252e3299efe2ebaa33.r2.cloudflarestorage.com/east-v-west/uploads/test.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=65d28efd570ed73c469bc9ddfaf381d0%2F20251104%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20251104T013316Z&X-Amz-Expires=300&X-Amz-Signature=89ca379f87eeb0a5df25d59aa53907c41c4a21766c3cc52c456b5944dceb3938&X-Amz-SignedHeaders=host&x-amz-checksum-crc32=AAAAAA%3D%3D&x-amz-sdk-checksum-algorithm=CRC32&x-id=PutObject","getUrl":"https://fdfd423971a9c0252e3299efe2ebaa33.r2.cloudflarestorage.com/east-v-west/uploads/test.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=65d28efd570ed73c469bc9ddfaf381d0%2F20251104%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20251104T013316Z&X-Amz-Expires=300&X-Amz-Signature=db074ae10b1481e09a27e757e2dbf5c9162019341646215ccaad4b52af0982c6&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject"}
[test] PUT upload to R2
[test] PUT failed 403 <?xml version="1.0" encoding="UTF-8"?><Error><Code>RequestTimeTooSkewed</Code><Message>The difference between the request time and the server&apos;s time is too large.</Message></Error>
[test] presign POST http://localhost:3003/api/media/presign
[test] presign ok {"key":"uploads/test.txt","putUrl":"https://fdfd423971a9c0252e3299efe2ebaa33.r2.cloudflarestorage.com/east-v-west/uploads/test.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=65d28efd570ed73c469bc9ddfaf381d0%2F20251103%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20251103T233810Z&X-Amz-Expires=300&X-Amz-Signature=12405492e11a137ab8cd3e7033d3b282a69a385f4110aa31534656375518aacf&X-Amz-SignedHeaders=host&x-amz-checksum-crc32=AAAAAA%3D%3D&x-amz-sdk-checksum-algorithm=CRC32&x-id=PutObject","getUrl":"https://fdfd423971a9c0252e3299efe2ebaa33.r2.cloudflarestorage.com/east-v-west/uploads/test.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=65d28efd570ed73c469bc9ddfaf381d0%2F20251103%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20251103T233810Z&X-Amz-Expires=300&X-Amz-Signature=dac4f8dd1278cbe3f76ac22261dba5dc1d8bb9b6c0ec52d3c5e6571dab13c581&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject"}
[test] PUT upload to R2
[test] PUT failed 403 <?xml version="1.0" encoding="UTF-8"?><Error><Code>SignatureDoesNotMatch</Code><Message>The request signature we calculated does not match the signature you provided. Check your secret access key and signing method.</Message><StringToSign>AWS4-HMAC-SHA256
20251103T233810Z
20251103/auto/s3/aws4_request
cc66cef696cb9922f8eae1fc7f036c4b7ea2af6bfca2af8851c9be8345a51742</StringToSign><StringToSignBytes>41 57 53 34 2d 48 4d 41 43 2d 53 48 41 32 35 36 0a 32 30 32 35 31 31 30 33 54 32 33 33 38 31 30 5a 0a 32 30 32 35 31 31 30 33 2f 61 75 74 6f 2f 73 33 2f 61 77 73 34 5f 72 65 71 75 65 73 74 0a 63 63 36 36 63 65 66 36 39 36 63 62 39 39 32 32 66 38 65 61 65 31 66 63 37 66 30 33 36 63 34 62 37 65 61 32 61 66 36 62 66 63 61 32 61 66 38 38 35 31 63 39 62 65 38 33 34 35 61 35 31 37 34 32</StringToSignBytes><CanonicalRequest>PUT
/east-v-west/uploads/test.txt
X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&amp;X-Amz-Credential=65d28efd570ed73c469bc9ddfaf381d0%2F20251103%2Fauto%2Fs3%2Faws4_request&amp;X-Amz-Date=20251103T233810Z&amp;X-Amz-Expires=300&amp;X-Amz-SignedHeaders=host&amp;x-amz-checksum-crc32=AAAAAA%3D%3D&amp;x-amz-sdk-checksum-algorithm=CRC32&amp;x-id=PutObject
host:fdfd423971a9c0252e3299efe2ebaa33.r2.cloudflarestorage.com

host
UNSIGNED-PAYLOAD</CanonicalRequest><CanonicalRequestBytes>50 55 54 0a 2f 65 61 73 74 2d 76 2d 77 65 73 74 2f 75 70 6c 6f 61 64 73 2f 74 65 73 74 2e 74 78 74 0a 58 2d 41 6d 7a 2d 41 6c 67 6f 72 69 74 68 6d 3d 41 57 53 34 2d 48 4d 41 43 2d 53 48 41 32 35 36 26 58 2d 41 6d 7a 2d 43 6f 6e 74 65 6e 74 2d 53 68 61 32 35 36 3d 55 4e 53 49 47 4e 45 44 2d 50 41 59 4c 4f 41 44 26 58 2d 41 6d 7a 2d 43 72 65 64 65 6e 74 69 61 6c 3d 36 35 64 32 38 65 66 64 35 37 30 65 64 37 33 63 34 36 39 62 63 39 64 64 66 61 66 33 38 31 64 30 25 32 46 32 30 32 35 31 31 30 33 25 32 46 61 75 74 6f 25 32 46 73 33 25 32 46 61 77 73 34 5f 72 65 71 75 65 73 74 26 58 2d 41 6d 7a 2d 44 61 74 65 3d 32 30 32 35 31 31 30 33 54 32 33 33 38 31 30 5a 26 58 2d 41 6d 7a 2d 45 78 70 69 72 65 73 3d 33 30 30 26 58 2d 41 6d 7a 2d 53 69 67 6e 65 64 48 65 61 64 65 72 73 3d 68 6f 73 74 26 78 2d 61 6d 7a 2d 63 68 65 63 6b 73 75 6d 2d 63 72 63 33 32 3d 41 41 41 41 41 41 25 33 44 25 33 44 26 78 2d 61 6d 7a 2d 73 64 6b 2d 63 68 65 63 6b 73 75 6d 2d 61 6c 67 6f 72 69 74 68 6d 3d 43 52 43 33 32 26 78 2d 69 64 3d 50 75 74 4f 62 6a 65 63 74 0a 68 6f 73 74 3a 66 64 66 64 34 32 33 39 37 31 61 39 63 30 32 35 32 65 33 32 39 39 65 66 65 32 65 62 61 61 33 33 2e 72 32 2e 63 6c 6f 75 64 66 6c 61 72 65 73 74 6f 72 61 67 65 2e 63 6f 6d 0a 0a 68 6f 73 74 0a 55 4e 53 49 47 4e 45 44 2d 50 41 59 4c 4f 41 44</CanonicalRequestBytes><SignatureProvided>12405492e11a137ab8cd3e7033d3b282a69a385f4110aa31534656375518aacf</SignatureProvided></Error>
